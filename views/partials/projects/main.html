<aside class="right" style="width: 22%">
	
	<input type="text" class="search" ng-model="projectSearch" placeholder="Search projects" ng-change="projectQuery()">
	<a href="" class="clear" ng-show="projectSearch" ng-click="projectSearch = ''">Clear</a>

	<ul class="results" ng-show="projectSearch">
		<li ng-repeat="result in projectResults | filter: projectSearch | limitTo: 7" ng-click="gotoProject(result.slug)" title="{{result.title}}">	
			<strong>{{result.title}}</strong>
			<dl>
				<dt>Author: </dt>
				<dd><strong>{{result.author.name.first}} {{result.author.name.last}}</strong> <small>{{fromNow(result.postDate)}}</small></dd>
				<dt ng-show="result.editor">Editor: </dt>
				<dd ng-show="result.editor"><strong>{{result.author.name.first}} {{result.author.name.last}}</strong> <small>{{fromNow(result.editDate)}}</small></dd>
			</dl>
			<ul class="categories">
				<li ng-repeat="category in result.categories" style="background-color: {{category.color}}">
					{{category.name}}
				</li>
			</ul>
		</li>
		<li ng-show="projectResults.length == 0" class="no-results">No results for <em>{{projectSearch}}</em></li>
	</ul>

	<ul class="radio" ng-hide="projectSearch" style="margin-top: 1em;">
		<li>
			<label for="open">
				<input type="radio" id="open" ng-model="visibleProjects" value="open"> Open projects
			</label>
		</li>
		<li>
			<label for="closed">
				<input type="radio" id="closed" ng-model="visibleProjects" value="closed"> Closed projects
			</label>
		</li>
		<li>
			<label for="all">
				<input type="radio" id="all" ng-model="visibleProjects" value="all"> All projects
			</label>
		</li>
	</ul>

	<ul class="checkboxes" ng-hide="projectSearch">
		<li ng-repeat="category in categoryList">
			<label for="{{category.slug}}">
				<input type="checkbox" id="{{category.slug}}" value="{{category._id}}" ng-checked="createDoc.categories.indexOf(category._id) > -1" ng-click="categoryToggle(category._id)"> 
				<span class="color-block" style="background-color: {{category.color }};"></span>
				{{category.name}}
			</label>
		</li>
	</ul>

	<ul class="links" ng-hide="projectSearch">
		<li><a href="/#/projects/create">Create project</a></li>
	</ul>

	
</aside>

<ul class="project-list content left" style="width: 78%">
	<li ng-repeat="project in projectList">
		<div class="project-left">
			
			<h2><a href="/#/projects/{{project.slug}}">{{project.title}}</a></h2>

			<small class="project-period">
				<span ng-show="project.start">{{displayDate(project.start)}}</span>
				<span ng-show="project.start && project.end"> &mdash; </span> 
				<span ng-show="project.end">{{displayDate(project.end)}}</span> 
				(<em>{{project.time}}</em>) 
			</small>

			<div ng-show="project.description" class="project-description">{{project.description}}</div>
		</div>

		<div class="project-right">
			<ul class="project-participants">
				<small class="project-participants-count" ng-show="project.participants.length == 0">No participants</small>
				<small class="project-participants-count" ng-show="project.participants.length == 1">1 participant:</small>
				<small class="project-participants-count" ng-show="project.participants.length > 1">{{project.participants.length}} participants:</small>
				
				<li ng-repeat="participant in project.participants"  ng-class="{owner: project.owner._id == participant._id}">
					<img src="/avatar.gif" title="{{participant.name.first}} {{participant.name.last}}">
				</li>
			</ul>


			<ul class="project-tasks">
				<small class="project-tasks-count" ng-show="project.tasks.length == 0">No tasks</small>
				<small class="project-tasks-count" ng-show="project.tasks.length == 1">1 task / {{project.completedTasks}} completed:</small>
				<small class="project-tasks-count" ng-show="project.tasks.length > 1">{{project.tasks.length}} tasks / {{project.completedTasks}} completed:</small>
				
				<li ng-repeat="task in project.tasks">
					
				</li>
			</ul>			
		</div>


	</li>
</ul>
